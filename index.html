<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GREENLEAVES ARCHI</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Header with Logo and Title -->
    <header>
        <div class="header-container">
            <div class="logo-section">
                <img src="LOGO.jpg" alt="GreenLeaves Archi Logo" class="logo">
                <h1 class="site-title">GREENLEAVES ARCHI</h1>
            </div>
            <nav class="header-nav">
                <ul>
                    <li><a href="#home">HOME</a></li>
                    <li><a href="#projects">PROJECTS</a></li>
                    <li><a href="#services">SERVICES</a></li>
                    <li><a href="#about">ABOUT</a></li>
                    <li><a href="#quote">GET QUOTE</a></li>
                    <li><a href="#contact">CONTACT US</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-section" id="home">
        <div class="hero-container">
            <div class="hero-content">
                <p class="hero-subtitle">Transforming Spaces, Creating Dreams</p>
                
                <blockquote class="hero-quote">
                    "Architecture is not just about buildings; it's about creating experiences that inspire and endure."
                </blockquote>
                
            </div>
            
            <div class="hero-slideshow">
                <div class="slideshow-container" id="slideshow-container">
                    <!-- Slides will be loaded dynamically -->
                </div>

                <div class="dots-container" id="dots-container">
                    <!-- Dots will be loaded dynamically -->
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main>

        <!-- Before and After Section -->
        <section class="before-after-section">
            <h2 class="section-heading">INTERIOR TRANSFORMATION</h2>
            <div class="before-after-container">
                <div class="before-after-slider">
                    <img src="AFTER.JPG" alt="After - Kitchen Interior Design" class="after-image">
                    <div class="slider-overlay">
                        <img src="BEFORE.JPG" alt="Before - Empty Kitchen" class="before-image">
                    </div>
                    <div class="slider-handle">
                        <div class="slider-line"></div>
                        <div class="slider-button">
                            <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="15" cy="15" r="15" fill="white"/>
                                <path d="M10 15L7 12M7 12L10 9M7 12H23M20 15L23 18M23 18L20 21" stroke="#2c5f2d" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div class="slider-line"></div>
                    </div>
                    <div class="labels">
                        <span class="label-before">BEFORE</span>
                        <span class="label-after">AFTER</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Projects Section -->
        <section id="projects" class="projects-section">
            <h2 class="section-heading">PROJECTS</h2>

            <!-- Projects will be dynamically generated here -->
            <div id="projects-container"></div>
        </section>

        <!-- Services Section -->
        <section id="services" class="services-section">
            <h2 class="section-heading">SERVICES</h2>
            
            <div class="service-tabs" id="service-tabs">
                <!-- Tabs will be loaded dynamically -->
            </div>

            <div id="services-container">
                <!-- Service content will be loaded dynamically -->
            </div>


        </section>

        <!-- About Section -->
        <section id="about" class="about-section">
            <h2 class="section-heading">ABOUT</h2>
            <div class="about-content">
                <p>At GREENLEAVES ARCHI, we believe that exceptional interior design is more than just aesthetics ‚Äì it's about creating spaces that inspire, comfort, and transform lives. With years of expertise and a passionate team of creative professionals, we bring your vision to life through innovative design solutions that perfectly blend functionality with elegance. Our commitment to sustainability and attention to detail ensures that every project reflects the unique personality and lifestyle of our clients. From concept to completion, we meticulously craft spaces that not only meet but exceed expectations, turning houses into homes and commercial spaces into memorable experiences. Trust GREENLEAVES ARCHI to deliver timeless designs that stand the test of time while embracing modern trends and eco-friendly practices.</p>
            </div>
        </section>

        <!-- Get Your Quote Section -->
        <section id="quote" class="quote-section">
            <h2 class="section-heading">GET YOUR QUOTE</h2>
            <p class="section-subtitle">Share your project details and we'll provide you with a customized quote within 24 hours</p>
            <div class="quote-container">
                <form class="quote-form" onsubmit="handleQuoteSubmit(event)">
                    <div class="form-group">
                        <label for="quote-name">Full Name *</label>
                        <input type="text" id="quote-name" name="name" required placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="quote-phone">Phone Number *</label>
                        <input type="tel" id="quote-phone" name="phone" required pattern="[0-9]{10}" maxlength="10" placeholder="10-digit mobile number">
                    </div>
                    <div class="form-group">
                        <label for="quote-email">Email Address *</label>
                        <input type="email" id="quote-email" name="email" required placeholder="your@email.com">
                    </div>
                    <div class="form-group">
                        <label for="quote-city">City *</label>
                        <input type="text" id="quote-city" name="city" required placeholder="Your city">
                    </div>
                    <div class="form-group full-width">
                        <label for="quote-address">Property Address</label>
                        <input type="text" id="quote-address" name="address" placeholder="Property location (optional)">
                    </div>
                    <div class="form-group">
                        <label>Property Type *</label>
                        <div class="radio-group">
                            <label><input type="radio" name="property-type" value="apartment" required> Apartment</label>
                            <label><input type="radio" name="property-type" value="villa"> Villa</label>
                            <label><input type="radio" name="property-type" value="independent-house"> Independent House</label>
                            <label><input type="radio" name="property-type" value="office"> Office</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="quote-area">Carpet Area (sq ft) *</label>
                        <input type="number" id="quote-area" name="area" required min="100" placeholder="E.g., 1200">
                    </div>
                    <div class="form-group">
                        <label for="quote-bedrooms">Number of Bedrooms</label>
                        <select id="quote-bedrooms" name="bedrooms">
                            <option value="">Select</option>
                            <option value="1">1 BHK</option>
                            <option value="2">2 BHK</option>
                            <option value="3">3 BHK</option>
                            <option value="4">4 BHK</option>
                            <option value="5+">5+ BHK</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quote-budget">Budget Range (‚Çπ)</label>
                        <select id="quote-budget" name="budget">
                            <option value="">Select budget</option>
                            <option value="3-5L">3 - 5 Lakhs</option>
                            <option value="5-8L">5 - 8 Lakhs</option>
                            <option value="8-12L">8 - 12 Lakhs</option>
                            <option value="12-20L">12 - 20 Lakhs</option>
                            <option value="20L+">20 Lakhs+</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label>Rooms to Design *</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="rooms" value="living-room"> Living Room</label>
                            <label><input type="checkbox" name="rooms" value="master-bedroom"> Master Bedroom</label>
                            <label><input type="checkbox" name="rooms" value="guest-bedroom"> Guest Bedroom(s)</label>
                            <label><input type="checkbox" name="rooms" value="kitchen"> Kitchen</label>
                            <label><input type="checkbox" name="rooms" value="dining"> Dining Area</label>
                            <label><input type="checkbox" name="rooms" value="pooja"> Pooja Room</label>
                            <label><input type="checkbox" name="rooms" value="balcony"> Balcony</label>
                            <label><input type="checkbox" name="rooms" value="bathroom"> Bathroom(s)</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="quote-timeline">Expected Timeline</label>
                        <select id="quote-timeline" name="timeline">
                            <option value="">Select timeline</option>
                            <option value="urgent">Urgent (Within 1 month)</option>
                            <option value="1-2months">1-2 Months</option>
                            <option value="2-3months">2-3 Months</option>
                            <option value="3-6months">3-6 Months</option>
                            <option value="flexible">Flexible</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Design Style Preference</label>
                        <select id="quote-style" name="style">
                            <option value="">Select style</option>
                            <option value="modern">Modern</option>
                            <option value="contemporary">Contemporary</option>
                            <option value="traditional">Traditional</option>
                            <option value="minimalist">Minimalist</option>
                            <option value="industrial">Industrial</option>
                            <option value="scandinavian">Scandinavian</option>
                            <option value="eclectic">Eclectic</option>
                        </select>
                    </div>
                    <div class="form-group full-width">
                        <label for="quote-requirements">Additional Requirements</label>
                        <textarea id="quote-requirements" name="requirements" rows="4" placeholder="Tell us more about your vision, specific requirements, or any special considerations..."></textarea>
                    </div>
                    <div class="form-group full-width">
                        <button type="submit" class="submit-btn">Get Free Quote</button>
                    </div>
                </form>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="contact-section">
            <h2 class="section-heading">CONTACT US</h2>
            <div class="contact-info-centered">
                <h3>Get In Touch</h3>
                <p>We'd love to hear from you! Whether you have a question about our services, pricing, or anything else, our team is ready to answer all your questions.</p>
                <div class="contact-details">
                    <div class="contact-item">
                        <strong>üìç Address:</strong>
                        <p>P&T Colony,Medipally, Hyderabad, Telangana 500001</p>
                    </div>
                    <div class="contact-item">
                        <strong>üìû Phone:</strong>
                        <p>+91 7780646922</p>
                        <p>+91 9381344021</p>
                    </div>
                    <div class="contact-item">
                        <strong>‚úâÔ∏è Email:</strong>
                        <p>greenleavesarchi@gmail.com</p>
                    </div>
                    <div class="contact-item">
                        <strong>‚è∞ Working Hours:</strong>
                        <p>Monday - Saturday: 9:00 AM - 6:00 PM</p>
                    </div>
                </div>
                <div class="map-container">
                    <iframe 
                        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d243647.3160410083!2d78.24323299999999!3d17.412608!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bcb99daeaebd2c7%3A0xae93b78392bafbc2!2sHyderabad%2C%20Telangana!5e0!3m2!1sen!2sin!4v1234567890123!5m2!1sen!2sin" 
                        width="100%" 
                        height="400" 
                        style="border:0; border-radius: 10px;" 
                        allowfullscreen="" 
                        loading="lazy" 
                        referrerpolicy="no-referrer-when-downgrade">
                    </iframe>
                </div>
            </div>
        </section>

        <!-- Gallery Modal -->
        <div id="galleryModal" class="gallery-modal">
            <span class="gallery-close" onclick="closeGallery()">&times;</span>
            <img class="gallery-content" id="galleryImage">
            <a class="gallery-prev" onclick="changeGalleryImage(-1)">‚ùÆ</a>
            <a class="gallery-next" onclick="changeGalleryImage(1)">‚ùØ</a>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p>&copy; 2025 GREENLEAVES ARCHI. All rights reserved.</p>
            <div class="social-links">
                <a href="https://facebook.com" target="_blank" aria-label="Facebook">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                </a>
                <a href="https://instagram.com" target="_blank" aria-label="Instagram">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                    </svg>
                </a>
                <a href="https://twitter.com" target="_blank" aria-label="Twitter">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                    </svg>
                </a>
                <a href="mailto:greenleavesarchi@gmail.com" aria-label="Email">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"/>
                    </svg>
                </a>
                <a href="https://linkedin.com" target="_blank" aria-label="LinkedIn">
                    <svg width="30" height="30" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                </a>
            </div>
        </div>
    </footer>

    <!-- Floating WhatsApp Button -->
    <a href="https://wa.me/917780646922" target="_blank" class="whatsapp-float">
        <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="16" cy="16" r="16" fill="#25D366"/>
            <path d="M16 7C11.03 7 7 11.03 7 16C7 17.68 7.49 19.24 8.34 20.57L7 25L11.59 23.69C12.87 24.47 14.38 24.92 16 24.92C20.97 24.92 25 20.89 25 15.92C25 10.95 20.97 7 16 7ZM20.5 19.5C20.26 20.18 19.26 20.75 18.53 20.87C18.05 20.95 17.44 21.01 15.4 20.17C12.85 19.13 11.24 16.64 11.11 16.47C10.98 16.3 10.08 15.11 10.08 13.88C10.08 12.65 10.7 12.05 10.93 11.81C11.16 11.57 11.43 11.51 11.62 11.51C11.81 11.51 12 11.51 12.17 11.51C12.34 11.51 12.59 11.45 12.84 12.01C13.09 12.57 13.7 13.8 13.77 13.94C13.84 14.08 13.91 14.26 13.8 14.43C13.69 14.6 13.62 14.71 13.49 14.86C13.36 15.01 13.24 15.12 13.11 15.28C12.98 15.44 12.85 15.61 13 15.84C13.15 16.07 13.7 16.95 14.51 17.68C15.54 18.6 16.4 18.88 16.66 19.01C16.92 19.14 17.09 19.12 17.24 18.95C17.39 18.78 17.98 18.08 18.15 17.85C18.32 17.62 18.49 17.66 18.72 17.73C18.95 17.8 20.17 18.41 20.43 18.54C20.69 18.67 20.86 18.73 20.93 18.83C21 18.93 21 19.33 20.5 19.5Z" fill="white"/>
        </svg>
    </a>

    <script src="projects-config.js"></script>
    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            loadSlideshow(); // Load slideshow images dynamically
            loadServices(); // Load service images dynamically
            generateProjects();
            initializeSlideshows();
            initializeBeforeAfterSlider();
            initializePhoneInput();
        });

        // Service categories configuration
        const SERVICES = [
            { id: 'kitchen', name: 'KITCHEN', folder: 'SERVICES/KITCHEN', prefix: 'KITCHEN_' },
            { id: 'bedroom', name: 'BEDROOM', folder: 'SERVICES/BEDROOM', prefix: 'BEDROOM_' },
            { id: 'livingroom', name: 'LIVING ROOM', folder: 'SERVICES/LIVING_ROOM', prefix: 'LIVING_ROOM_' },
            { id: 'tvunit', name: 'TV UNIT', folder: 'SERVICES/TV_UNIT', prefix: 'TV_UNIT_' },
            { id: 'pooja', name: 'POOJA ROOM', folder: 'SERVICES/POOJA_ROOM', prefix: 'POOJA_ROOM_' }
        ];

        // Store loaded service images
        let galleryImages = {};

        // Load services dynamically
        async function loadServices() {
            const tabsContainer = document.getElementById('service-tabs');
            const servicesContainer = document.getElementById('services-container');
            const extension = '.JPG';
            const maxImages = 50;
            
            const tabFragment = document.createDocumentFragment();
            const contentFragment = document.createDocumentFragment();
            
            for (let i = 0; i < SERVICES.length; i++) {
                const service = SERVICES[i];
                const images = [];
                
                // Load images sequentially
                for (let j = 1; j <= maxImages; j++) {
                    const imgPath = `${service.folder}/${service.prefix}${j}${extension}`;
                    if (!await checkImageExists(imgPath)) break;
                    images.push(imgPath);
                }
                
                // Store images for gallery
                galleryImages[service.id] = images;
                
                // Create tab button
                const tab = document.createElement('button');
                tab.className = i === 0 ? 'service-tab active' : 'service-tab';
                tab.textContent = service.name;
                tab.onclick = () => showService(service.id);
                tabFragment.appendChild(tab);
                
                // Create service content
                const content = document.createElement('div');
                content.id = service.id;
                content.className = i === 0 ? 'service-content active' : 'service-content';
                
                // Create grid with images
                const gridHTML = images.map((imgPath, index) => `
                    <div class="service-item" onclick="openGallery('${service.id}', ${index})">
                        <img src="${imgPath}" alt="${service.name} ${index + 1}" loading="lazy">
                    </div>
                `).join('');
                
                content.innerHTML = `<div class="service-grid">${gridHTML}</div>`;
                contentFragment.appendChild(content);
                
                console.log(`Loaded ${images.length} images for ${service.name}`);
            }
            
            tabsContainer.appendChild(tabFragment);
            servicesContainer.appendChild(contentFragment);
        }

        // Default captions for slideshow images
        const SLIDESHOW_CAPTIONS = [
            "Modern Residential Design",
            "Contemporary Living Spaces",
            "Sustainable Architecture",
            "Innovative Design Solutions",
            "Elegant Interior Design",
            "Timeless Architecture",
            "Creative Space Planning",
            "Sophisticated Design"
        ];

        // Load slideshow images dynamically
        async function loadSlideshow() {
            const slideshowContainer = document.getElementById('slideshow-container');
            const dotsContainer = document.getElementById('dots-container');
            const basePath = 'HOME_PAGE_SLIDESHOW/SLIDESHOW_';
            const extension = '.JPG';
            const maxSlides = 20;
            
            const slideFragment = document.createDocumentFragment();
            const dotFragment = document.createDocumentFragment();
            let slideCount = 0;

            // Load images sequentially
            for (let i = 1; i <= maxSlides; i++) {
                const imgPath = `${basePath}${i}${extension}`;
                if (!await checkImageExists(imgPath)) break;
                
                slideCount++;
                const isFirst = i === 1;
                
                // Create slide
                const slide = document.createElement('div');
                slide.className = isFirst ? 'slide active' : 'slide';
                slide.innerHTML = `
                    <img src="${imgPath}" alt="Modern Architecture ${i}" loading="lazy">
                    <div class="slide-caption">${SLIDESHOW_CAPTIONS[i - 1] || 'Beautiful Design'}</div>
                `;
                slideFragment.appendChild(slide);
                
                // Create dot
                const dot = document.createElement('span');
                dot.className = isFirst ? 'dot active' : 'dot';
                dot.onclick = () => currentSlide(i);
                dotFragment.appendChild(dot);
            }

            // Batch append slides and dots
            slideshowContainer.appendChild(slideFragment);
            dotsContainer.appendChild(dotFragment);

            // Add navigation arrows
            slideshowContainer.insertAdjacentHTML('beforeend', `
                <a class="prev" onclick="changeSlide(-1)">‚ùÆ</a>
                <a class="next" onclick="changeSlide(1)">‚ùØ</a>
            `);

            console.log(`Loaded ${slideCount} slideshow images`);
        }

        // Check if an image exists
        function checkImageExists(url) {
            return new Promise((resolve) => {
                const img = new Image();
                img.onload = () => resolve(true);
                img.onerror = () => resolve(false);
                img.src = url;
            });
        }

        // Generate projects dynamically from config
        async function generateProjects() {
            const container = document.getElementById('projects-container');
            
            if (typeof PROJECTS === 'undefined') {
                console.error('PROJECTS is not defined! Make sure projects-config.js is loaded.');
                return;
            }
            
            const stageDefinitions = [
                { folder: 'INSIGHT', name: 'Insight' },
                { folder: 'DESIGN', name: 'Design' },
                { folder: 'EXECUTION', name: 'Execution' }
            ];
            
            const fragment = document.createDocumentFragment();
            const allProjectSlideIndexes = [];
            
            for (let projectIndex = 0; projectIndex < PROJECTS.length; projectIndex++) {
                const project = PROJECTS[projectIndex];
                const projectDiv = document.createElement('div');
                projectDiv.className = 'project';
                
                // Detect available stages and load images
                const availableStages = [];
                for (const stage of stageDefinitions) {
                    const images = await loadStageImages(project, stage.folder);
                    if (images.length > 0) {
                        availableStages.push({ ...stage, images });
                    }
                }
                
                // Create slideshows for available stages
                const slideshowsHTML = availableStages.map((stage, stageIndex) => `
                    <div class="project-slideshow-wrapper">
                        <h4>${stage.name}</h4>
                        <div class="project-slideshow" data-project="${projectIndex}" data-stage="${stageIndex}">
                            ${stage.images.map((img, imgIndex) => `
                                <div class="project-slide ${imgIndex === 0 ? 'active' : ''}">
                                    <img src="${img}" alt="${project.name} ${stage.name} ${imgIndex + 1}" loading="lazy">
                                </div>
                            `).join('')}
                            <a class="project-prev" onclick="changeProjectSlide(${projectIndex}, ${stageIndex}, -1)">‚ùÆ</a>
                            <a class="project-next" onclick="changeProjectSlide(${projectIndex}, ${stageIndex}, 1)">‚ùØ</a>
                        </div>
                    </div>
                `).join('');
                
                projectDiv.innerHTML = `
                    <div class="project-header">
                        <h3>${project.name}</h3>
                        <p>${project.description}</p>
                    </div>
                    <div class="project-slideshows-container">
                        ${slideshowsHTML}
                    </div>
                `;
                
                fragment.appendChild(projectDiv);
                allProjectSlideIndexes.push(new Array(availableStages.length).fill(1));
            }
            
            container.appendChild(fragment);
            window.projectSlideIndexes = allProjectSlideIndexes;
        }
        
        // Load images from a specific stage folder
        async function loadStageImages(project, stageFolder) {
            const basePath = `${project.folder}/${stageFolder}/`;
            const extension = '.JPG';
            const maxImages = 50;
            const images = [];
            
            // Try multiple naming patterns
            const projectName = project.name.replace(/\s+/g, '_');
            const patterns = [
                `${projectName}_${stageFolder}_`,     // KHAMMAM_INSIGHT_1.JPG
                `${stageFolder}_`,                     // EXECUTION_1.JPG, DESIGN_1.JPG
                `LIVING_ROOM_`,                        // LIVING_ROOM_1.JPG
                `BEDROOM_`,                            // BEDROOM_1.JPG
                `KITCHEN_`,                            // KITCHEN_1.JPG
                `IMG_`,                                // IMG_7820.JPG
            ];
            
            // Try each pattern
            for (const prefix of patterns) {
                const foundImages = [];
                for (let i = 1; i <= maxImages; i++) {
                    const imgPath = `${basePath}${prefix}${i}${extension}`;
                    if (await checkImageExists(imgPath)) {
                        foundImages.push(imgPath);
                    } else {
                        break; // Stop when sequential number breaks
                    }
                }
                
                // If we found images with this pattern, use them
                if (foundImages.length > 0) {
                    images.push(...foundImages);
                    break;
                }
            }
            
            // Special handling for IMG_ pattern with non-sequential numbers
            if (images.length === 0 && basePath.includes('HASTINAPURAM/EXECUTION')) {
                const imgNumbers = [7820, 7822, 7826, 7831, 7834, 8606, 8824, 8827];
                for (const num of imgNumbers) {
                    const imgPath = `${basePath}IMG_${num}${extension}`;
                    if (await checkImageExists(imgPath)) {
                        images.push(imgPath);
                    }
                }
            }
            
            return images;
        }

        let slideIndex = 1;
        let slideTimer;

        function initializeSlideshows() {
            // Initialize main slideshow
            showSlides(slideIndex);
            startAutoSlide();

            // Initialize project slideshows
            initProjectSlideshows();
        }

        // Next/previous controls
        function changeSlide(n) {
            clearTimeout(slideTimer);
            showSlides(slideIndex += n);
            startAutoSlide();
        }

        // Thumbnail image controls
        function currentSlide(n) {
            clearTimeout(slideTimer);
            showSlides(slideIndex = n);
            startAutoSlide();
        }

        function showSlides(n) {
            const slides = document.getElementsByClassName("slide");
            const dots = document.getElementsByClassName("dot");
            
            if (!slides.length) return;
            
            // Handle wraparound
            if (n > slides.length) slideIndex = 1;
            if (n < 1) slideIndex = slides.length;
            
            // Update slides and dots in single loop
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.remove("active");
                if (dots[i]) dots[i].classList.remove("active");
            }
            
            // Show current slide and dot
            slides[slideIndex - 1].classList.add("active");
            if (dots[slideIndex - 1]) dots[slideIndex - 1].classList.add("active");
        }

        // Auto-advance slideshow
        function startAutoSlide() {
            slideTimer = setTimeout(function() {
                slideIndex++;
                showSlides(slideIndex);
                startAutoSlide();
            }, 4000); // Change slide every 4 seconds
        }

        // Project slideshow functions
        function initProjectSlideshows() {
            // Slideshows are already initialized with first slide active
        }

        function changeProjectSlide(projectIndex, stageIndex, n) {
            const currentIndex = window.projectSlideIndexes[projectIndex][stageIndex];
            const newIndex = currentIndex + n;
            showProjectSlides(projectIndex, stageIndex, newIndex);
        }

        function showProjectSlides(projectIndex, stageIndex, n) {
            const slideshow = document.querySelector(`[data-project="${projectIndex}"][data-stage="${stageIndex}"]`);
            if (!slideshow) return;
            
            const slides = slideshow.getElementsByClassName("project-slide");
            if (!slides.length) return;
            
            // Handle wraparound
            if (n > slides.length) n = 1;
            if (n < 1) n = slides.length;
            
            // Update index
            window.projectSlideIndexes[projectIndex][stageIndex] = n;
            
            // Update slides
            for (let i = 0; i < slides.length; i++) {
                slides[i].classList.toggle("active", i === n - 1);
            }
        }

        // Before/After Slider functionality
        function initializeBeforeAfterSlider() {
            const beforeAfterSlider = document.querySelector('.before-after-slider');
            const sliderOverlay = document.querySelector('.slider-overlay');
            const sliderHandle = document.querySelector('.slider-handle');
            
            if (!beforeAfterSlider || !sliderOverlay || !sliderHandle) return;
            
            let isDragging = false;

            function updateSlider(e) {
                const container = beforeAfterSlider.getBoundingClientRect();
                let x = e.clientX - container.left;
                
                // Constrain within bounds
                if (x < 0) x = 0;
                if (x > container.width) x = container.width;
                
                const percentage = (x / container.width) * 100;
                
                sliderOverlay.style.width = percentage + '%';
                sliderHandle.style.left = percentage + '%';
            }

            sliderHandle.addEventListener('mousedown', () => {
                isDragging = true;
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    updateSlider(e);
                }
            });

            beforeAfterSlider.addEventListener('click', (e) => {
                updateSlider(e);
            });

            // Touch support for mobile
            sliderHandle.addEventListener('touchstart', (e) => {
                isDragging = true;
                e.preventDefault();
            });

            document.addEventListener('touchend', () => {
                isDragging = false;
            });

            document.addEventListener('touchmove', (e) => {
                if (isDragging) {
                    const touch = e.touches[0];
                    const container = beforeAfterSlider.getBoundingClientRect();
                    let x = touch.clientX - container.left;
                    
                    if (x < 0) x = 0;
                    if (x > container.width) x = container.width;
                    
                    const percentage = (x / container.width) * 100;
                    
                    sliderOverlay.style.width = percentage + '%';
                    sliderHandle.style.left = percentage + '%';
                }
            });
        }

        // Service tabs functionality
        function showService(serviceName) {
            // Hide all service contents
            const contents = document.getElementsByClassName('service-content');
            for (let i = 0; i < contents.length; i++) {
                contents[i].classList.remove('active');
            }
            
            // Remove active class from all tabs
            const tabs = document.getElementsByClassName('service-tab');
            for (let i = 0; i < tabs.length; i++) {
                tabs[i].classList.remove('active');
            }
            
            // Show selected service content
            document.getElementById(serviceName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Gallery functionality
        let currentGalleryService = '';
        let currentGalleryIndex = 0;

        function openGallery(service, index) {
            currentGalleryService = service;
            currentGalleryIndex = index;
            const modal = document.getElementById('galleryModal');
            const img = document.getElementById('galleryImage');
            
            modal.style.display = 'block';
            img.src = galleryImages[service][index];
            document.body.style.overflow = 'hidden';
        }

        function closeGallery() {
            const modal = document.getElementById('galleryModal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function changeGalleryImage(direction) {
            const images = galleryImages[currentGalleryService];
            currentGalleryIndex += direction;
            
            if (currentGalleryIndex >= images.length) {
                currentGalleryIndex = 0;
            }
            if (currentGalleryIndex < 0) {
                currentGalleryIndex = images.length - 1;
            }
            
            const img = document.getElementById('galleryImage');
            img.src = images[currentGalleryIndex];
        }

        // Close gallery on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeGallery();
            }
        });

        // Contact form submission
        function handleSubmit(event) {
            event.preventDefault();
            
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const service = document.getElementById('service').value;
            const message = document.getElementById('message').value;
            
            // You can replace this with actual form submission logic
            alert(`Thank you, ${name}! GREENLEAVES ARCHI has received your message and will get back to you soon.`);
            
            // Reset form
            event.target.reset();
            
            return false;
        }

        // Phone input restriction
        function initializePhoneInput() {
            const phoneInput = document.getElementById('phone');
            const quotePhoneInput = document.getElementById('quote-phone');
            
            if (phoneInput) {
                phoneInput.addEventListener('input', function(e) {
                    this.value = this.value.replace(/[^0-9]/g, '');
                });
            }
            
            if (quotePhoneInput) {
                quotePhoneInput.addEventListener('input', function(e) {
                    this.value = this.value.replace(/[^0-9]/g, '');
                });
            }
        }

        // Quote form submission
        async function handleQuoteSubmit(event) {
            event.preventDefault();
            
            const form = event.target;
            const submitBtn = form.querySelector('.submit-btn');
            const originalBtnText = submitBtn.textContent;
            
            // Disable submit button and show loading state
            submitBtn.disabled = true;
            submitBtn.textContent = 'Sending...';
            
            // Get all form data
            const name = document.getElementById('quote-name').value;
            const phone = document.getElementById('quote-phone').value;
            const email = document.getElementById('quote-email').value;
            const city = document.getElementById('quote-city').value;
            const area = document.getElementById('quote-area').value;
            const address = document.getElementById('quote-address').value;
            const bedrooms = document.getElementById('quote-bedrooms').value;
            const budget = document.getElementById('quote-budget').value;
            const timeline = document.getElementById('quote-timeline').value;
            const style = document.getElementById('quote-style').value;
            const requirements = document.getElementById('quote-requirements').value;
            
            // Get selected rooms
            const rooms = Array.from(document.querySelectorAll('input[name="rooms"]:checked'))
                .map(cb => cb.value)
                .join(', ');
            
            if (!rooms) {
                alert('Please select at least one room to design.');
                submitBtn.disabled = false;
                submitBtn.textContent = originalBtnText;
                return false;
            }
            
            // Get property type
            const propertyType = document.querySelector('input[name="property-type"]:checked')?.value || '';
            
            // Prepare email message
            const emailMessage = `
NEW QUOTE REQUEST

Customer Details:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Name: ${name}
Phone: ${phone}
Email: ${email}
City: ${city}

Property Details:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Address: ${address || 'Not provided'}
Property Type: ${propertyType}
Carpet Area: ${area} sq ft
Bedrooms: ${bedrooms || 'Not specified'}
Budget Range: ${budget || 'Not specified'}

Design Requirements:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
Rooms to Design: ${rooms}
Design Style: ${style || 'Not specified'}
Expected Timeline: ${timeline || 'Not specified'}

Additional Requirements:
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
${requirements || 'None'}
            `.trim();
            
            // Prepare data for Web3Forms
            const formData = {
                access_key: "a1b8febd-8b2e-4aa3-a955-9612d7bd5f5d", // Replace with your access key from https://web3forms.com
                subject: `Quote Request from ${name}`,
                from_name: name,
                email: email,
                phone: phone,
                message: emailMessage,
                // Additional fields for better organization
                customer_name: name,
                customer_phone: phone,
                customer_email: email,
                customer_city: city,
                property_address: address,
                property_type: propertyType,
                carpet_area: area,
                bedrooms: bedrooms,
                budget: budget,
                rooms_to_design: rooms,
                design_style: style,
                timeline: timeline,
                additional_requirements: requirements
            };
            
            try {
                const response = await fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                
                const result = await response.json();
                
                if (result.success) {
                    alert(`Thank you, ${name}! Your quote request has been sent successfully to greenleavesarchi@gmail.com\n\nOur team will contact you within 24 hours with a detailed quotation.`);
                    form.reset();
                } else {
                    throw new Error(result.message || 'Form submission failed');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('Sorry, there was an error sending your request. Please try again or contact us directly:\n\nEmail: greenleavesarchi@gmail.com\nPhone: +91 7780646922');
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = originalBtnText;
            }
            
            return false;
        }
    </script>
</body>
</html>
